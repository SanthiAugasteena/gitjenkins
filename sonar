pipeline {

  agent any
  
     stages {
     
     stage("code checkout") {
         steps {
         git branch: 'main', url: 'https://github.com/spring-projects/spring-petclinic.git'
            } 
          }
          
      stage("build") {
         steps {
         build 'build'
            } 
          }
          
          stage("unit test") {
         steps {
         echo "unit testing"
         sleep 10
            } 
          }
        
        stage("code quality test") {
         steps {
         build 'petclinic_sonar'
            } 
          }
          
          stage("deploy") {
         steps {
         bat 'start java -jar -Dserver.port=8082 C:\\Windows\\System32\\config\\systemprofile\\AppData\\Local\\Jenkins\\.jenkins\\workspace\\build\\target\\spring-petclinic-2.4.0.BUILD-SNAPSHOT.jar'
            } 
          }
          
          stage("functional test") {
         steps {
         echo "functional testing"
            } 
          }
          
          stage("performance test") {
         steps {
         echo "performance testing"
            } 
          }
     }
}
